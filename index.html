<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="Interactive Data Science in the 2018 FIFA World Cup">
<meta name="author" content="Kyle Furlong & Lina Osorio">
    <link rel="shortcut icon" href="assets/ico/favicon.png">

    <title>Interactive Data Science in the 2018 FIFA World Cup</title>

    <!-- Bootstrap core CSS -->
    <link href="assets/css/bootstrap.css" rel="stylesheet">
       

    <!-- Custom styles for this template -->
    <link href="assets/css/main.css" rel="stylesheet">
    
    <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700,300italic,400italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Raleway:400,300,700' rel='stylesheet' type='text/css'>
	
    
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/smoothscroll.js"></script>
     <script src="assets/js/sankey.js"></script>   

  </head>

	  <body data-spy="scroll" data-offset="0" data-target="#navigation">
	   <!-- Fixed navbar -->
	    <div id="navigation" class="navbar navbar-default navbar-fixed-top">
	      <div class="container">
	        <div class="navbar-header">
	          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	            <span class="icon-bar"></span>
	          </button>
	          <a class="navbar-brand" href="#"><b>FIFA 2018</b></a>
	        </div>
	        <div class="navbar-collapse collapse">
	          <ul class="nav navbar-nav">
	            <li class="active"><a href="#home" class="smothscroll">Home</a></li>
	            <li><a href="#desc" class="smothscroll">Problem Description</a></li>
	            <li><a href="#summary" class="smothScroll">Data Summary</a></li>
	            <li><a href="#analysis" class="smothScroll">Data Analysis</a></li>
	 	    <li><a href="#results" class="smothScroll">Results</a></li>
	          </ul>
	        </div><!--/.nav-collapse -->
	      </div>
	    </div>


	<section id="home" name="home"></section>
	<div id="headerwrap">
		<div class="container">
 		<img class="img-responsive" src="assets/img/fifaStadium1.jpg" alt="" style="width: 125%;">
 		<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);">
			<h1 align = "center"><b>2018 FIFA World Cup</b></h1>
			<h3 align = "center">An exploration into FIFA World Cup data through machine learning and interactive data visualization</h3>
			</div>
		</div>	
	    </div> <!--/ .container -->
	</div><!--/ #headerwrap -->

	<section id="desc" name="desc"></section>
	<!-- INTRO WRAP -->
	<div id="intro">
		<div class="container">
			<div class="row centered">
				<h1>Data Pipeline</h1>
				<br>
				<br>
				<div class="col-lg-3">
					<img src="assets/img/questionIDS.png" alt="" style="width: 100%; height: auto;">
				</div>
				<div class="col-lg-3">
					<img src="assets/img/dataIDS.png" alt="" style="width: 100%; height: auto; border-radius: 20px;">
				</div>
				<div class="col-lg-3">
					<br>
					<img src="assets/img/explorationIDS.png" alt="" style="width: 100%; height: auto;">
				</div>
				<div class="col-lg-3">
					<br>
					<img src="assets/img/trophyIDS.png" alt="" style="width: 100%; height: auto;">
				</div>
			</div>
			<div class="row centered">
				<div class="col-lg-3">
					<h3>The Problem</h3>
					<p>The FIFA World Cup is one of the largest sporting events in the world. Understanding what drives
					teams to succeed is important not only for coaches and players in this massive tournament, but also
					for the fans who lack national representation and are searching for a teach to follow and support.</p>
				</div>
				<div class="col-lg-3">
					<h3>Collection & Cleaning</h3>
					<p>We collected data from multiple sources in order to build a more comprehensive and well-tuned model.
					These data sources included <a href="http://www.eloratings.net/">ELO Adjusted Ranking Data</a> and
					<a href="https://www.kaggle.com/abecklas/fifa-world-cup">data from every World Cup tournament and regional qualifying tournament</a> from 1950 the present.</p>
				</div>
				<div class="col-lg-3">
					<h3>Exploration</h3>
					<p>We began our exploratory data analysis in R, making use of the <a href="https://www.tidyverse.org/">tidyr and ggplot2</a> packages to reformat and 
					visualize the data, respectively. We then turned to D3 and Tableau to present the key findings from our EDA on the web.</p>
				</div>
				<div class="col-lg-3">
					<h3>Prediction</h3>
					<p>Finally, we followed the <a href="http://scikit-learn.org/stable/tutorial/machine_learning_map/index.html">recommendation of the Scikit-Learn library in Python</a> 
						to select, train, and tune two multi-class classification machine learning model to predict performance in the FIFA World Cup given past 
					experience in the tournament and athletic performance indicators from the qualifying tournament of that year.</p>
				</div>
			</div>
			<br>
			<hr>
	    </div> <!--/ .container -->
	</div><!--/ #introwrap -->
	
	<!-- FEATURES WRAP -->
	<div id="features">
		<div class="container">
			<div class="row">
				<h1 class="centered">What's New?</h1>
				<br>
				<br>
				<div class="col-lg-6">
					<div id="area1">
					<script src="assets/dataViz/d3.v3.min.js" charset="utf-8"></script>
					<script type='text/javascript' src='assets/dataViz/d3script2.js'></script>
					</div>
					<style>
		.axis text {
			  font: 10px sans-serif;
			}
			.axis path,
			.axis line {
			  fill: none;
			  stroke: #000;
			  shape-rendering: crispEdges;
			}
			.bar {
			  fill: steelblue;
			  fill-opacity: .9;
			}
			.bar:hover {
			  fill: orange;
			}
			label {
			  position: absolute;
			  top: 10px;
			  right: 10px;
			}	
		</style>
				</div>
				
				<div class="col-lg-6">
					<h3>Some Features</h3>
					<br>
				<!-- ACCORDION -->
		            <div class="accordion ac" id="accordion2">
		                <div class="accordion-group">
		                    <div class="accordion-heading">
		                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseOne">
		                        First Class Design
		                        </a>
		                    </div><!-- /accordion-heading -->
		                    <div id="collapseOne" class="accordion-body collapse in">
		                        <div class="accordion-inner">
								<p>It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
								</div><!-- /accordion-inner -->
		                    </div><!-- /collapse -->
		                </div><!-- /accordion-group -->
		                <br>
		
		                <div class="accordion-group">
		                    <div class="accordion-heading">
		                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseTwo">
		                        Retina Ready Theme
		                        </a>
		                    </div>
		                    <div id="collapseTwo" class="accordion-body collapse">
		                        <div class="accordion-inner">
								<p>It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
								</div><!-- /accordion-inner -->
		                    </div><!-- /collapse -->
		                </div><!-- /accordion-group -->
		                <br>
		
		                 <div class="accordion-group">
		                    <div class="accordion-heading">
		                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseThree">
		                        Awesome Support
		                        </a>
		                    </div>
		                    <div id="collapseThree" class="accordion-body collapse">
		                        <div class="accordion-inner">
								<p>It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
								</div><!-- /accordion-inner -->
		                    </div><!-- /collapse -->
		                </div><!-- /accordion-group -->
		                <br>
		                
		                 <div class="accordion-group">
		                    <div class="accordion-heading">
		                        <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" href="#collapseFour">
		                        Responsive Design
		                        </a>
		                    </div>
		                    <div id="collapseFour" class="accordion-body collapse">
		                        <div class="accordion-inner">
								<p>It has survived not only five centuries, but also the leap into electronic typesetting, remaining essentially unchanged. It was popularised in the 1960s with the release of Letraset sheets containing Lorem Ipsum passages, and more recently with desktop publishing software like Aldus PageMaker including versions of Lorem Ipsum.</p>
								</div><!-- /accordion-inner -->
		                    </div><!-- /collapse -->
		                </div><!-- /accordion-group -->
		                <br>			
					</div><!-- Accordion -->
				</div>
			</div>
		</div><!--/ .container -->
	</div><!--/ #features -->
	
	<!-- GROUPS STAGE -->
	<div id="groupstage">
		<div class="container"> 
		<div class="row">
			<h1 class="centered">Which teams will survive the groups stage?</h1>
				<br>
				<br>
			<div class="col-lg-6">
				<div id="area1a">
				<script src="assets/dataViz/d3.v3.min.js"></script>
				<script src="assets/js/sankey.js"></script>
				</div>
				<style>
path {
  stroke: white;
  stroke-width: 0.25px;
  fill: lightgrey;
}
.graph {
	font-family: sans-serif;
	font-size: 11px;
}
.nodesankey rect {
  cursor: pointer;
  fill-opacity: .9;
  shape-rendering: crispEdges;
}
.nodesankey text {
  pointer-events: none;
}
.linksankey {
  fill: none;
  stroke: #000;
  stroke-opacity: .6;
}
.linksankey:hover {
  stroke-opacity: .9;
}
div.tooltipsankey {   
  position: absolute;           
  text-align: left;           
  width: 70px;                  
  height: 40px;                 
  padding: 4px;             
  font: 11px sans-serif;        
  background: silver;   
  border: 0px;      
  border-radius: 10px;           
  pointer-events: none;         
}
</style>

			</div>
			<div class="col-lg-6">
				<h3>Groups Stage</h3>
					<br>
<script>
	
// sankey //
var units = "Stimmen";
var aspect = 0.8;
var margin = {top: 10, right: 60, bottom: 10, left: 80},
    height = 500 - margin.top - margin.bottom,
    width = (height+margin.top+margin.bottom)/aspect - margin.left - margin.right;
	
var formatNumber = d3.format(",.0f"),
    format = function(d) { return formatNumber(d) + " " + units; },
    color = d3.scale.category20();
var svg = d3.select("#chart").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
	.attr("class", "svgchart")
  .append("g")
    .attr("transform", 
          "translate(" + margin.left + "," + margin.top + ")");
var sankey = d3.sankey()
    .nodeWidth(30)
    .nodePadding(17)
    .size([width, height]);
var path = sankey.link();
var div = d3.select("body").append("div")   
    .attr("class", "tooltipsankey")               
    .style("opacity", 0);
var color = d3.scale.ordinal()
    .domain(["Uruguay", "Saudi Arabia", "Russia", "Egypt", "Advance", "Out"])
    .range(["darkred", "indianred", "lightsalmon", "mistyrose", "darkgreen", "darkgray"]);
var rect
var node
var link
d3.csv("assets/dataViz/group_a_sk.csv", function(error, data) {
daten = data
  graph = {"nodes" : [], "links" : []};
    data.forEach(function (d) {
      graph.nodes.push({ "name": d.source });
      graph.nodes.push({ "name": d.target });
      graph.links.push({ "source": d.source,
                         "target": d.target,
						 "color": d.color,
                         "value": +d.value });
     });
     graph.nodes = d3.keys(d3.nest()
       .key(function (d) { return d.name; })
       .map(graph.nodes));
     graph.links.forEach(function (d, i) {
       graph.links[i].source = graph.nodes.indexOf(graph.links[i].source);
       graph.links[i].target = graph.nodes.indexOf(graph.links[i].target);
     });
     graph.nodes.forEach(function (d, i) {
       graph.nodes[i] = { "name": d };
     });
  sankey
    .nodes(graph.nodes)
    .links(graph.links)
    .layout(32);
link = svg.append("g").selectAll(".link")
      .data(graph.links)
    .enter().append("path")
      .attr("class", "linksankey")
      .attr("d", path)
	  .attr("id", function(d) { return "link" + d.source.name; })
      .style("stroke-width", function(d) { return Math.max(1, d.dy); })
	  .style("stroke", function(d) { return d.color; });
  link.on("mouseover", function(d) {      
            div.transition()        
                .duration(200)      
                .style("opacity", .9);      
            div .html("<b>" + d.source.name + "</b> ? <b>"  + d.target.name + "</b><br/>" + format(d.value))  
                .style("left", (d3.event.pageX) + "px")     
                .style("top", (d3.event.pageY - 28) + "px");    
            })                  
        .on("mouseout", function(d) {       
            div.transition()        
                .duration(500)      
                .style("opacity", 0);   
        });
				
node = svg.append("g").selectAll(".node")
      .data(graph.nodes)
    .enter().append("g")
      .attr("class", "nodesankey")
      .attr("transform", function(d) { 
		  return "translate(" + d.x + "," + d.y + ")"; });
	
rect = node.append("rect")
      .attr("height", function(d) { return d.dy; })
      .attr("width", sankey.nodeWidth())
      .style("fill", function(d) { return color(d.name); });
rect.on("mouseover", function(d) {      
            div.transition()        
                .duration(200)      
                .style("opacity", .9);      
            div .html("<b>" + d.name + "</b>:<br/>" + format(d.value))  
                .style("left", (d3.event.pageX) + "px")     
                .style("top", (d3.event.pageY - 28) + "px");    
            })                  
        .on("mouseout", function(d) {       
            div.transition()        
                .duration(500)      
                .style("opacity", 0);   
        });
	  
  node.append("text")
      .attr("x", 40)
      .attr("y", function(d) { return d.dy / 2; })
      .attr("dy", ".35em")
      .attr("text-anchor", "start")
      .attr("transform", null)
      .text(function(d) { return d.name; })
	  .attr("class", "graph")
    .filter(function(d) { return d.x < width / 2; })
      .attr("x", -40 + sankey.nodeWidth())
      .attr("text-anchor", "end");
  
// Fade-Effect on mouseover
node.on("mouseover", function(d) {
	link.transition()        
        .duration(700)
		.style("opacity", .1);
	link.filter(function(s) { return d.name == s.source.name; }).transition()        
        .duration(700)
		.style("opacity", 1);
	link.filter(function(t) { return d.name == t.target.name; }).transition()        
        .duration(700)
		.style("opacity", 1);
	})
	.on("mouseout", function(d) { svg.selectAll(".linksankey").transition()        
        .duration(700)
		.style("opacity", 1)} ); 
 	  	  
});
			</div>
		</div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="assets/js/bootstrap.js"></script>
	<script>
	$('.carousel').carousel({
	  interval: 3500
	})
		
</script>
</body>
</html>
